(function(a){Sammy=Sammy||{},Sammy.CommentWidget=function(b){var c;b.helpers({showCommentWidget:function(b,d){var e=[];d&&(e=Comment.find_by_location_id(d).map(function(){return this.to_hash()}));var f=JST["templates/comment_widget"]({comments:e});c=b.openFaceboxWidget(f,"comment_widget"),c.find("table a").click(function(){var b=c.find("textarea");return b.val(a(this).text()),!1})},acceptComment:function(b,d){var e=c.find("textarea").val();a.ajax({type:"POST",dataType:"json",url:"/comments/collection_create",data:{comment:e,locations:d},success:function(a){_.each(a,function(a){var b=new Comment(a);b.save()}),b.redirect("#/")}})}})}})(jQuery)